task run_test();
     begin
          $display("====================================================================");
          $display("----------------TEST CASE 1: REGISTER TEST--------------------------");
          $display("====================================================================");
          $display("--------------------Read and write value check----------------------");
          sys_rst_n = 0;
          repeat (2) @(posedge sys_clk);
          #0.5;
          sys_rst_n = 1;
          write(ADDR_TCR, 32'h00, 4'b1111, 0); 
          write(ADDR_TDR0, 32'h00, 4'b1111, 0); 
          write(ADDR_TDR1, 32'h00, 4'b1111, 0); 
          read_compare(ADDR_TISR, 32'h00);
          write(ADDR_TCMP0, 32'h00, 4'b1111, 0); 
          write(ADDR_TCMP1, 32'h00, 4'b1111, 0); 
          write(ADDR_TIER, 32'h00, 4'b1111, 0); 
          write(ADDR_TISR, 32'h00, 4'b1111, 0); 
          write(ADDR_THCSR, 32'h00, 4'b1111, 0); 
          read_compare(ADDR_TCR, 32'h00);
          read_compare(ADDR_TDR0, 32'h00);
          read_compare(ADDR_TDR1, 32'h00);
          read_compare(ADDR_TCMP0, 32'h00);
          read_compare(ADDR_TCMP1, 32'h00);
          read_compare(ADDR_TIER, 32'h00);
          read_compare(ADDR_THCSR, 32'h00);

          sys_rst_n = 0;
          repeat (2) @(posedge sys_clk);
          #0.5; 
          sys_rst_n = 1;
          write(ADDR_TCR, 32'hFFFF_F802, 4'b1111, 0);
          write(ADDR_TDR0, 32'hFFFF_FFFF, 4'b1111, 0);
          write(ADDR_TDR1, 32'hFFFF_FFFF, 4'b1111, 0);
          write(ADDR_TCMP0, 32'hFFFF_FFFF, 4'b1111, 0); 
          write(ADDR_TCMP1, 32'hFFFF_FFFF, 4'b1111, 0);
          write(ADDR_TIER, 32'hFFFF_FFFF, 4'b1111, 0); 
          write(ADDR_TISR, 32'hFFFF_FFFF, 4'b1111, 0);
          write(ADDR_THCSR, 32'hFFFF_FFFF, 4'b1111, 0);
          read_compare(ADDR_TCR, 32'h802);
          read_compare(ADDR_TDR0, 32'hFFFF_FFFF);
          read_compare(ADDR_TDR1, 32'hFFFF_FFFF);
          read_compare(ADDR_TCMP0, 32'hFFFF_FFFF);
          read_compare(ADDR_TCMP1, 32'hFFFF_FFFF);
          read_compare(ADDR_TIER, 32'h01);
          read_compare(ADDR_TISR, 32'h01);
          read_compare(ADDR_THCSR, 32'h01);
          
          sys_rst_n = 0;
          repeat (2) @(posedge sys_clk);
          #0.5;
          sys_rst_n = 1;
          write(ADDR_TCR, 32'h00, 4'b1111, 0);
          write(ADDR_TDR0, 32'h00, 4'b1111, 0);
          write(ADDR_TDR1, 32'h00, 4'b1111, 0);
          read_compare(ADDR_TISR, 32'h00);
          write(ADDR_TCMP0, 32'h00, 4'b1111, 0);
          write(ADDR_TCMP1, 32'h00, 4'b1111, 0);
          write(ADDR_TIER, 32'h00, 4'b1111, 0);
          write(ADDR_TISR, 32'h00, 4'b1111, 0);
          write(ADDR_THCSR, 32'h00, 4'b1111, 0);
          read_compare(ADDR_TCR, 32'h00);
          read_compare(ADDR_TDR0, 32'h00);
          read_compare(ADDR_TDR1, 32'h00);
          read_compare(ADDR_TCMP0, 32'h00);
          read_compare(ADDR_TCMP1, 32'h00);
          read_compare(ADDR_TIER, 32'h00);
          read_compare(ADDR_THCSR, 32'h00);

          sys_rst_n = 0;
          repeat (2) @(posedge sys_clk);
          #0.5;
          sys_rst_n = 1;
          write(ADDR_TCR, 32'h5555_5554, 4'b1111, 0);
          write(ADDR_TDR0, 32'h5555_5555, 4'b1111, 0); 
          write(ADDR_TDR1, 32'h5555_5555, 4'b1111, 0);
          write(ADDR_TCMP0, 32'h5555_5555, 4'b1111, 0);
          write(ADDR_TCMP1, 32'h5555_5555, 4'b1111, 0);
          write(ADDR_TIER, 32'h5555_5555, 4'b1111, 0);
          write(ADDR_TISR, 32'h5555_5555, 4'b1111, 0);
          write(ADDR_THCSR, 32'h5555_5555, 4'b1111, 0);
          read_compare(ADDR_TCR, 32'h500);
          read_compare(ADDR_TDR0, 32'h5555_5555);
          read_compare(ADDR_TDR1, 32'h5555_5555);
          read_compare(ADDR_TCMP0, 32'h5555_5555);
          read_compare(ADDR_TCMP1, 32'h5555_5555);
          read_compare(ADDR_TIER, 32'h01);
          read_compare(ADDR_TISR, 32'h01);
          read_compare(ADDR_THCSR, 32'h01);  
          write(ADDR_TCR, 32'h5555_5555, 4'b1111, 0);
          read_compare(ADDR_TCR, 32'h501);
          write(ADDR_TDR1, 32'hFFFF_FFFF, 4'b1111, 0);
          write(ADDR_TDR0, 32'hFFFF_FFFE, 4'b1111, 0);
          write(ADDR_TCR, 32'h500, 4'b1111, 0);
          write(ADDR_TCR, 32'h700, 4'b1111, 0);
          write(ADDR_TCR, 32'h501, 4'b1111, 0);
          write(ADDR_TISR, 32'h501, 4'b1110, 0);
          write(ADDR_TISR, 32'h501, 4'b1111, 0);
          write(ADDR_TCR, 32'h802, 4'b0010, 0);
          write(ADDR_TCR, 32'h902, 4'b0010, 0);
          
          sys_rst_n = 0;
          repeat (2) @(posedge sys_clk);
          #0.5;
          sys_rst_n = 1;
          write(ADDR_TCR, 32'h900, 4'b0010, 0);
     end 
endtask

